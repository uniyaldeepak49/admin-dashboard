<div class="settings-container">
  <div class="settings-header">
    <h1>Settings</h1>
    <p>Customize your application preferences</p>
  </div>

  <div class="settings-grid">
    <!-- Appearance Settings -->
    <mat-card class="settings-card">
      <mat-card-header>
        <mat-card-title>
          <mat-icon>palette</mat-icon>
          Appearance
        </mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div class="setting-item">
          <div class="setting-info">
            <h3>Dark Mode</h3>
            <p>Switch between light and dark themes</p>
          </div>
          <mat-slide-toggle
            [checked]="themeService.isDarkMode()"
            (change)="themeService.toggleTheme()"
          >
          </mat-slide-toggle>
        </div>
      </mat-card-content>
    </mat-card>

    <!-- Notification Settings -->
    <mat-card class="settings-card">
      <mat-card-header>
        <mat-card-title>
          <mat-icon>notifications</mat-icon>
          Notifications
        </mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div class="setting-item">
          <div class="setting-info">
            <h3>Push Notifications</h3>
            <p>Receive notifications in the app</p>
          </div>
          <mat-slide-toggle
            [checked]="settings().notifications"
            (change)="updateSetting('notifications', $event.checked)"
          >
          </mat-slide-toggle>
        </div>

        <mat-divider></mat-divider>

        <div class="setting-item">
          <div class="setting-info">
            <h3>Email Alerts</h3>
            <p>Receive important updates via email</p>
          </div>
          <mat-slide-toggle
            [checked]="settings().emailAlerts"
            (change)="updateSetting('emailAlerts', $event.checked)"
          >
          </mat-slide-toggle>
        </div>
      </mat-card-content>
    </mat-card>

    <!-- General Settings -->
    <mat-card class="settings-card">
      <mat-card-header>
        <mat-card-title>
          <mat-icon>settings</mat-icon>
          General
        </mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div class="setting-item">
          <div class="setting-info">
            <h3>Auto Save</h3>
            <p>Automatically save changes</p>
          </div>
          <mat-slide-toggle
            [checked]="settings().autoSave"
            (change)="updateSetting('autoSave', $event.checked)"
          >
          </mat-slide-toggle>
        </div>

        <mat-divider></mat-divider>

        <mat-form-field appearance="outline">
          <mat-label>Language</mat-label>
          <mat-select
            [value]="settings().language"
            (selectionChange)="updateSetting('language', $event.value)"
          >
            @for (lang of languages; track lang.value) {
              <mat-option [value]="lang.value">{{ lang.label }}</mat-option>
            }
          </mat-select>
        </mat-form-field>
      </mat-card-content>
    </mat-card>

    <!-- Regional Settings -->
    <mat-card class="settings-card">
      <mat-card-header>
        <mat-card-title>
          <mat-icon>public</mat-icon>
          Regional
        </mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <mat-form-field appearance="outline">
          <mat-label>Timezone</mat-label>
          <mat-select
            [value]="settings().timezone"
            (selectionChange)="updateSetting('timezone', $event.value)"
          >
            @for (tz of timezones; track tz.value) {
              <mat-option [value]="tz.value">{{ tz.label }}</mat-option>
            }
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Date Format</mat-label>
          <mat-select
            [value]="settings().dateFormat"
            (selectionChange)="updateSetting('dateFormat', $event.value)"
          >
            @for (format of dateFormats; track format.value) {
              <mat-option [value]="format.value">{{ format.label }}</mat-option>
            }
          </mat-select>
        </mat-form-field>
      </mat-card-content>
    </mat-card>
  </div>

  <div class="settings-actions">
    <button mat-button (click)="resetSettings()">
      <mat-icon>restore</mat-icon>
      Reset to Defaults
    </button>
    <button mat-raised-button color="primary" (click)="saveSettings()">
      <mat-icon>save</mat-icon>
      Save Settings
    </button>
  </div>
</div>
